<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trash Day Valet - Making Trash Day Simple & Safe for Seniors in Holiday City Carefree</title>
    <meta name="description" content="Trash Day Valet provides reliable trash and recycling valet service for seniors in Holiday City Carefree, Toms River, NJ. We handle the heavy lifting so you don't have to.">
    <style>
        
        :root {
            /* Set this to your final hero photo URL or a local file path like url('img/hero.jpg') */
            --hero-bg: url('https://via.placeholder.com/1400x800?text=Replace+Hero+Photo');
        }
/* Senior-friendly design: High contrast, large fonts, simple layout, calming colors */
        body {
            font-family: 'Arial', sans-serif;
            font-size: 18px;
            line-height: 1.6;
            color: #000;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #007bff; /* Trustworthy blue */
            color: white;
            text-align: center;
            padding: 40px 20px;
        }
        h1 {
            font-size: 36px;
            margin: 0;
        }
        h2 {
            font-size: 30px;
            color: #007bff;
            text-align: center;
            margin-top: 40px;
        }
        section {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        .hero {
            /* HERO IMAGE: replace the URL below with your chosen photo */
            background: linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)), var(--hero-bg) no-repeat center/cover;
            color: white;
            text-align: center;
            padding: 100px 20px;
        }
        .pricing {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }
        .plan {
            background: #e9f7ff;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            min-width: 250px;
        }
        .best-value {
            border: 3px solid #007bff;
        }
        button, input[type="submit"] {
            font-size: 20px;
            padding: 15px 30px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover, input[type="submit"]:hover {
            background: #218838;
        }
        form {
            display: grid;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }
        label {
            font-weight: bold;
        }
        input, select, textarea {
            font-size: 18px;
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        footer {
            background: #007bff;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }
        nav {
            background: #343a40;
            padding: 15px;
            text-align: center;
        }
        nav a {
            color: white;
            font-size: 20px;
            margin: 0 15px;
            text-decoration: none;
        }
        nav a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            .pricing { flex-direction: column; }
        }
/* --- Two-step signup --- */
.step {
    background: #ffffff;
    border-radius: 8px;
    padding: 18px;
    box-shadow: 0 1px 6px rgba(0,0,0,0.08);
}
.step-title {
    font-size: 22px;
    margin: 0 0 10px 0;
    color: #007bff;
    text-align: center;
}
.step-note {
    margin: 0 0 14px 0;
}
.hidden {
    display: none;
}
.secondary-btn {
    background: #343a40;
    margin-top: 8px;
}
.secondary-btn:hover {
    background: #23272b;
}
.inline-help {
    font-size: 16px;
    color: #333;
    margin: 10px 0 0 0;
    text-align: center;
}
.progress {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin: 0 0 18px 0;
}
.progress span {
    display: inline-block;
    padding: 8px 12px;
    border-radius: 999px;
    background: #e9ecef;
    font-weight: bold;
}
.progress .active {
    background: #007bff;
    color: #fff;
}
.center-btn {
    display: flex;
    justify-content: center;
}
/* Hover expansion for primary action button */
#reserveBtn {
    transition: transform 0.18s ease, box-shadow 0.18s ease;
}
#reserveBtn:hover {
    transform: scale(1.06);
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
}
/* Payment reassurance line */
.security-line {
    margin: 16px 0;
    padding: 14px;
    background: #f1f7ff;
    border: 2px solid #cfe0ff;
    border-radius: 8px;
    text-align: center;
    font-size: 17px;
}
.security-line strong {
    display: block;
    margin-bottom: 6px;
}
/* Hover expansion for Step 2 finish button */
#finishBtn {
    transition: transform 0.18s ease, box-shadow 0.18s ease;
}
#finishBtn:hover {
    transform: scale(1.04);
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.2);
}
/* Processing / confirmation message */
.submit-message {
    margin: 14px 0 0 0;
    padding: 14px;
    border-radius: 8px;
    background: #e9f7ff;
    border: 2px solid #bfe6ff;
    font-size: 17px;
    text-align: center;
}
.submit-message strong {
    display: block;
    margin-bottom: 6px;
}
/* Optional: make the phone fallback visually clear */
.phone-fallback {
    margin-top: 12px;
    padding: 12px;
    background: #f8f9fa;
    border: 1px solid #e1e5ea;
    border-radius: 8px;
    text-align: center;
    font-size: 16px;
}
    
        .plan-buttons{ display:grid; gap:12px; margin-top:12px; }
        .pay-btn{
            display:block;
            text-align:center;
            padding:16px 18px;
            border-radius:10px;
            background:#28a745;
            color:#fff;
            font-size:22px;
            font-weight:bold;
            text-decoration:none;
        }
        .pay-btn:hover{ filter:brightness(0.95); }
        .pay-btn.best{ border:3px solid #007bff; }

        .sticky-cta{
            position:fixed; left:0; right:0; bottom:0;
            display:none;
            gap:10px; justify-content:space-around;
            padding:12px; background:#fff; border-top:2px solid #ddd;
            z-index:9999;
        }
        .sticky-cta a{
            flex:1; text-align:center; padding:14px 0;
            border-radius:10px; background:#007bff; color:#fff;
            font-size:18px; font-weight:bold; text-decoration:none;
        }
        .sticky-cta a:hover{ filter:brightness(0.95); }

        @media (max-width: 768px){
            body{ padding-bottom:84px; } /* room for sticky bar */
            .sticky-cta{ display:flex; }
        }

</style>

    <!-- Analytics (GA4) - replace G-XXXXXXXXXX with your Measurement ID -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXXXXX', { 'anonymize_ip': true });
    </script>

</head>
<body>

    <header>
        <h1>Trash Day Valet</h1>
        <p>Making Trash Day Simple and Safe for Seniors in Holiday City Carefree, Toms River, NJ 08757</p>
    </header>

    <nav>
        <a href="#about">About</a>
        <a href="#service">Our Service</a>
        <a href="#pricing">Pricing</a>
        <a href="#signup">Sign Up</a>
        <a href="#contact">Contact</a>
    </nav>

    <section id="home" class="hero">
    <h2 style="font-size:42px; margin-bottom:10px;">One Less Risk. Every Single Week.</h2>
    <h2 style="font-size:28px; margin-top:0;">We bring your trash and recycling cans out - and back in - so you don't have to.</h2>
	<h2 style="font-size:22px; margin-top:0;">Most of our neighbors sign up because they don't want one bad fall to change everything.</h2>
    <p style="font-size:22px; max-width:760px; margin: 18px auto;">	
	No contracts. Cancel anytime with one phone call.
    </p>

    <button onclick="document.getElementById('signup').scrollIntoView();">Reserve My Valet</button>

    <p style="font-size:20px; margin-top:18px;">
        Prefer to sign up by phone? Call or text: <strong>(732) 440-9093</strong>
    </p>
</section>

	<section id="about">
        <h2>About</h2>
        <p>Trash Day Should Never Be a Health Risk.</p>
	 <p>In Holiday City Carefree, many residents are dealing with balance issues, joint pain, or limited mobility. Yet every week, heavy trash and recycling cans still have to be dragged to the curb and back again.</p>
	<p>That routine may seem minor - until it becomes the cause of a serious injury.</p>
	<p>Trash Day Valet exists to eliminate that risk entirely.
We handle the cans for you, so you don't have to strain, lift, twist, or step outside unnecessarily.</p>
<p>We are local. We are consistent. And we show up every scheduled pickup. Quietly, respectfully, and reliably.</p>
	<p>This service isn't a luxury.
It's a preventive safety measure that removes a real burden and helps you stay independent in your home.</p>
<hr style="margin:32px 0; border:none; border-top:1px solid #ddd;">

<h3 style="text-align:center; color:#007bff; font-size:26px; margin-bottom:14px;">
    Who This Service Is For
</h3>

<ul style="max-width:760px; margin:0 auto; font-size:18px; line-height:1.7;">
    <li>If pulling a heavy trash or recycling can feels harder than it used to</li>
    <li>If you've ever felt unsteady, rushed, or sore on trash day</li>
    <li>If balance, joints, or strength aren't what they were - and that's okay</li>
    <li>If you've skipped a pickup or worried about forgetting the night before</li>
    <li>If your family would feel better knowing this task is handled safely</li>
    <li>If you want to stay independent in your home without taking unnecessary risks</li>
</ul>

<p style="text-align:center; max-width:760px; margin:18px auto 0 auto;">
    If even one of these sounds familiar, this service was built specifically for you.
</p>
          </section>


    <section id="service">
        <h2>Our Service</h2>
        <p>We provide valet service for trash and recycling in Holiday City Carefree.</p>
        <ul>
            <li><strong>Trash Day (Thursday pickup):</strong> We take out accessible trash cans after 4pm every Wednesday night and return empty trash cans on Thursday shortly after pickup.</li>
            <li><strong>Recycling Weeks (every other week):</strong> On recycling weeks, we take out recycling cans after 4pm Tuesday, return them Wednesday after pickup, then return again after 4pm Wednesday to take out trash cans for Thursday pickup, and return trash cans Thursday after pickup.</li>
            <li>Cans must be accessible (e.g., near driveway or garage, no locked gates).</li>
            <li>Reliable service focused on senior safety.</li>
<li>Special accommodations may be arranged by request.</li>

        </ul>
        <p>Note: Berkeley Township trash pickup schedules may vary; we adjust to official township days.</p>
	<p><strong>Liability:</strong> You (the client) will never be held liable for any injury sustained by me (the owner) or anyone I employ while on your property. Trash Day Valet assumes 100% risk for any incidents during service.</p>
    </section>

    <section id="pricing">
       <h2>Simple Subscription Pricing</h2>

<div class="security-line" style="margin-top:16px;">
    <strong>Limited availability:</strong>
    We only service a fixed number of homes per route to guarantee reliability.
</div>

<p style="text-align:center; max-width:760px; margin: 0 auto 18px auto;">
    Pick the option that feels easiest. You can change plans anytime.
</p>
            <div class="pricing">
            <div class="plan">
                <h3>Flexible Option (Weekly)</h3>
                <p><strong>$14.95 per week</strong></p>
                <p>Pay by the week.</p>
            </div>
            <div class="plan">
                <h3>Most Popular (Monthly)</h3>
                <p><strong>$12.95 per week</strong></p>
                <p>Chosen by most Holiday City neighbors.</p>
            </div>
            <div class="plan best-value">
                <h3>Lock-In Best Rate (Quarterly)</h3>
                <p><strong>$9.95 per week</strong></p>
                <p>Prepay for 3 months and save!</p>
            </div>
        </div>
    </section>

<section class="no-worries" id="no-worries">
    <h2>No Worries - Here's How This Works</h2>

    <p style="text-align:center; max-width:760px; margin: 0 auto;">
        This is a simple, respectful service designed for seniors. No pressure, no confusion - just dependable help every week.
    </p>

    <div class="reassurance-grid">
        <div class="reassurance-box">
            <h3>Clear, Simple, Safe.</h3>
            <ul>
                <li><strong>No long-term contracts.</strong> Subscribe month-to-month (or save with quarterly).</li>
                <li><strong>Cancel anytime</strong> with 7 days notice - phone or email. No cancellation fees.</li>
                <li><strong>We never enter your home.</strong> We only handle your cans.</li>
                <li><strong>Only your cans.</strong> No upsells. No surprises.</li>
                <li><strong>Local owner.</strong> You'll know who is servicing your home.</li>
            </ul>
        </div>

        <div class="reassurance-box">
            <h3>What Neighbors Say</h3>

            <div class="testimonial">
                <p>"I don't worry about taking a spill on trash day anymore. It's been such a huge relief for me."</p>
                <p class="byline">- Holiday City Resident</p>
            </div>

            <div class="testimonial">
                <p>"My back thanks me every week. Reliable and polite."</p>
                <p class="byline">- Carefree Neighbor</p>
            </div>

            <div class="testimonial" style="margin-bottom:0;">
                <p>"Wonderful service. Shows up when they say they will, and I no longer need to worry about my parents hauling big awkward trash cans back and forth."</p>
                <p class="byline">- Son of Local Senior</p>
            </div>
        </div>
    </div>

    <div class="callout-line">
        <strong>Peace of mind:</strong> If you ever have a question or a special note about where your cans are, just tell us once - we'll take care of the rest.
    </div>
</section>
<section id="agreement">
        <h2>Service Agreement</h2>
        <p><strong>Plain English Agreement</strong></p>
        <p>Trash Day Valet provides valet service for your trash and recycling cans as described above. Service is subscription-based with automatic billing, paid either weekly, monthly, or prepaid quarterly (13 weeks).</p>
        <p>You may cancel anytime with 7 days notice via email or phone-no fees.</p>
        <p>Cans must be accessible for service. If inaccessible on a scheduled day, no refund for that week.</p>
        <p><strong>Liability:</strong> You (the client) will never be held liable for any injury sustained by me (the owner) or anyone I employ while on your property. Trash Day Valet assumes 100% risk for any incidents during service.</p>
        <p>By signing up, you agree to these terms. Full payment processed securely via Stripe.</p>
    </section>

<section id="signup">
    <h2>Simple Sign Up</h2>
    <p style="text-align:center; max-width:760px; margin: 0 auto 18px auto;">
        Step 1 takes less than 30 seconds. Then you'll choose your plan and set up secure billing.
    </p>

    <div class="progress" aria-label="Signup progress">
        <span id="prog1" class="active">Step 1: Reserve</span>
        <span id="prog2">Step 2: Plan & Payment</span>
    </div>

    <!-- One form, two steps -->
    <form id="signupForm" action="#" method="POST">
	<input type="hidden" name="source" value="website">
        <!-- STEP 1 -->
        <div id="step1" class="step">
            <p class="step-title">Step 1: Reserve Valet</p>
            <p class="step-note">Just the basics so we can confirm you're in our service area and reach you if needed.</p>

            <label for="name">Full Name</label>
            <input type="text" id="name" name="name" required>

            <label for="address">Full Address (in Holiday City Carefree)</label>
            <input type="text" id="address" name="address" required>

            <label for="phone">Phone Number</label>
            <input
    type="tel"
    id="phone"
    name="phone"
    required
    inputmode="tel"
    autocomplete="tel"
    placeholder="(732) 555-1234"
>

            <p class="inline-help"><strong>No email required yet.</strong> We keep this simple.</p>

            <div class="center-btn">
    <button type="button" id="reserveBtn">Reserve My Valet</button>
</div>
            <p class="inline-help" style="text-align:center;">Prefer to sign up by phone? Call or text: <strong>(732) 440-9093</strong></p>
        </div>

        <!-- STEP 2 -->
        <div id="step2" class="step hidden">
            <p class="step-title">Step 2: Choose Plan & Set Up Secure Billing</p>
            <p class="step-note">Payment is securely processed. You can cancel anytime.</p>
	<div class="phone-fallback">
    Prefer to sign up by phone instead of online? Call or text: <strong>(732) 440-9093</strong>
</div>

            <label for="email">Email (for receipts)</label>
            <input type="email" id="email" name="email" autocomplete="email" placeholder="Optional (for receipts)">

            <label>Choose Your Plan</label>
            <div class="plan-buttons" role="group" aria-label="Choose your plan">
                <a class="pay-btn" id="payWeekly" href="#" role="button">Start Weekly – $14.95/week</a>
                <a class="pay-btn" id="payMonthly" href="#" role="button">Start Monthly – $12.95/week</a>
                <a class="pay-btn best" id="payQuarterly" href="#" role="button">Start Quarterly – $9.95/week</a>
            </div>
            <p class="inline-help" style="margin-top:10px;">
                Prefer not to pay online? Call or text <strong>(732) 440-9093</strong> and we’ll enroll you by phone.
            </p>

            <label for="notes">Notes (optional: where cans are located)</label>
            <textarea id="notes" name="notes" rows="4"></textarea>

            <p class="inline-help">
                <strong>Important:</strong> We only handle your cans. We never enter your home.
            </p>

            <div class="security-line">
    <strong> Your payment is secure.</strong>
    We use Stripe, the same secure payment system trusted by major banks and retailers.
    Your card information is never stored on this website.
</div>

<div class="inline-help" style="margin-top:10px;"><strong>Next:</strong> Tap a plan button above to securely complete billing.</div>
<div id="submitMsg" class="submit-message hidden" role="status" aria-live="polite">
    <strong>One moment…</strong>
    Saving your reservation and opening secure billing.
</div>

            <button type="button" id="backBtn" class="secondary-btn">Back</button>
            <p class="inline-help" style="text-align:center; margin-top:10px;">Questions? Call or text: <strong>(732) 440-9093</strong></p>
        </div>
    </form>
</section>

    <section id="contact">
        <h2>Contact Us</h2>
        <p>Email: Scott@TrashDayValet.vip</p>
        <p>Phone: (732) 440-9093</p>
        <p>Serving only Holiday City Carefree, Toms River, NJ 08757</p>
    </section>

    <footer>
        <p>&copy; 2025 Trash Day Valet. All rights reserved. Making life safer, one trash day at a time.</p>
    </footer>

<!-- Sticky Call/Sign Up bar for mobile -->
<div class="sticky-cta" aria-label="Quick actions">
    <a href="tel:+17324409093" id="ctaCall">Call</a>
    <a href="sms:+17324409093?&body=Hi%20Trash%20Day%20Valet%20-%20I%20want%20to%20sign%20up.%20My%20address%20is%20" id="ctaText">Text</a>
    <a href="#signup" id="ctaSignup">Sign Up</a>
</div>

<script>
(function () {
    /* ===========================
       CONFIG — YOU MUST SET THESE
       =========================== */

    // 1) Google Sheets Web App URL (from Google Apps Script "Deploy > Web app")
    // Example: https://script.google.com/macros/s/AKfycbx.../exec
    const SHEETS_WEBAPP_URL = "PASTE_YOUR_GOOGLE_APPS_SCRIPT_WEBAPP_URL_HERE";

    // 2) Stripe Payment Links (create in Stripe Dashboard > Payment Links)
    const STRIPE_LINKS = {
        weekly: "PASTE_STRIPE_PAYMENT_LINK_WEEKLY",
        monthly: "PASTE_STRIPE_PAYMENT_LINK_MONTHLY",
        quarterly: "PASTE_STRIPE_PAYMENT_LINK_QUARTERLY"
    };

    /* ===========================
       DOM
       =========================== */
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');

    const reserveBtn = document.getElementById('reserveBtn');
    const backBtn = document.getElementById('backBtn');

    const prog1 = document.getElementById('prog1');
    const prog2 = document.getElementById('prog2');

    const form = document.getElementById('signupForm');

    const nameEl = document.getElementById('name');
    const addressEl = document.getElementById('address');
    const phoneEl = document.getElementById('phone');

    const emailEl = document.getElementById('email');
    const notesEl = document.getElementById('notes');

    const payWeekly = document.getElementById('payWeekly');
    const payMonthly = document.getElementById('payMonthly');
    const payQuarterly = document.getElementById('payQuarterly');

    const submitMsg = document.getElementById('submitMsg');

    const ctaCall = document.getElementById('ctaCall');
    const ctaText = document.getElementById('ctaText');
    const ctaSignup = document.getElementById('ctaSignup');

    /* ===========================
       UTIL
       =========================== */
    function safeGtag(eventName, params) {
        try {
            if (typeof gtag === 'function') gtag('event', eventName, params || {});
        } catch (e) {}
    }

    function getUrlParams() {
        const p = new URLSearchParams(window.location.search);
        const obj = {};
        for (const [k, v] of p.entries()) obj[k] = v;
        return obj;
    }

    function normalizePhone(raw) {
        const digits = (raw || "").replace(/\D/g, "");
        return digits;
    }

    function setStep(stepNum) {
        if (stepNum === 1) {
            step1.classList.remove('hidden');
            step2.classList.add('hidden');
            prog1.classList.add('active');
            prog2.classList.remove('active');
            step1.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            step1.classList.add('hidden');
            step2.classList.remove('hidden');
            prog1.classList.remove('active');
            prog2.classList.add('active');
            step2.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    }

    function showSubmitting(show) {
        if (show) submitMsg.classList.remove('hidden');
        else submitMsg.classList.add('hidden');
    }

    function validateStep1() {
        if (!nameEl.checkValidity()) { nameEl.reportValidity(); return false; }
        if (!addressEl.checkValidity()) { addressEl.reportValidity(); return false; }

        const digits = normalizePhone(phoneEl.value);
        if (digits.length < 10) {
            phoneEl.setCustomValidity("Please enter a 10-digit phone number.");
            phoneEl.reportValidity();
            return false;
        }
        phoneEl.setCustomValidity("");
        return true;
    }

    function buildLeadPayload(extra) {
        const params = getUrlParams();
        const payload = {
            ts_iso: new Date().toISOString(),
            source: "website",
            name: (nameEl.value || "").trim(),
            address: (addressEl.value || "").trim(),
            phone_raw: (phoneEl.value || "").trim(),
            phone_digits: normalizePhone(phoneEl.value),
            email: (emailEl.value || "").trim(),
            notes: (notesEl.value || "").trim(),
            campaign: params.campaign || params.c || "",
            batch: params.batch || "",
            utm_source: params.utm_source || "",
            utm_medium: params.utm_medium || "",
            utm_campaign: params.utm_campaign || "",
            utm_content: params.utm_content || "",
            utm_term: params.utm_term || "",
            referrer: document.referrer || "",
            page: window.location.href
        };
        return Object.assign(payload, extra || {});
    }

    async function postToSheets(payload) {
        if (!SHEETS_WEBAPP_URL || SHEETS_WEBAPP_URL.indexOf("PASTE_") === 0) {
            // Still let the site function; just skip posting if not configured yet.
            console.warn("SHEETS_WEBAPP_URL not set. Lead not saved.");
            return { ok: true, skipped: true };
        }

        // Use no-cors to avoid CORS pain; Apps Script still receives the POST.
        // You won't be able to read the response in no-cors mode, so we treat it as success.
        try {
            await fetch(SHEETS_WEBAPP_URL, {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            });
            return { ok: true };
        } catch (e) {
            console.error("Lead post failed:", e);
            return { ok: false, error: String(e) };
        }
    }

    /* ===========================
       FLOW
       =========================== */

    // Prevent native submit (we control the flow)
    form.addEventListener('submit', function (e) {
        e.preventDefault();
    });

    reserveBtn.addEventListener('click', async function () {
        if (!validateStep1()) return;

        // Save Step 1 immediately to Sheets
        showSubmitting(true);
        safeGtag('tdv_step1_reserve_click', { method: 'web', location: 'step1' });

        const payload = buildLeadPayload({ stage: "reserved" });
        const res = await postToSheets(payload);

        showSubmitting(false);

        if (!res.ok) {
            alert("Could not save your reservation right now. Please call or text (732) 440-9093 and we'll sign you up.");
            safeGtag('tdv_lead_save_error', { message: (res.error || '').slice(0, 100) });
            return;
        }

        // Mark locally as reserved
        try { localStorage.setItem("tdv_reserved", "1"); } catch (e) {}

        setStep(2);
        safeGtag('tdv_step1_reserved', { saved: true, skipped: !!res.skipped });
    });

    backBtn.addEventListener('click', function () {
        showSubmitting(false);
        setStep(1);
        safeGtag('tdv_back_to_step1', {});
    });

    async function startPayment(planKey) {
        const link = STRIPE_LINKS[planKey] || "";
        if (!link || link.indexOf("PASTE_") === 0) {
            alert("Stripe payment link not set yet for this plan. Please call or text (732) 440-9093 to enroll.");
            safeGtag('tdv_stripe_link_missing', { plan: planKey });
            return;
        }

        // If they somehow jumped to step2 first, still capture them.
        if (!validateStep1()) return;

        // Save plan selection to Sheets (2nd row update event)
        showSubmitting(true);
        safeGtag('tdv_plan_click', { plan: planKey });

        const payload = buildLeadPayload({ stage: "plan_selected", plan: planKey });
        await postToSheets(payload);

        // Open Stripe (same tab to reduce confusion)
        window.location.href = link;
    }

    payWeekly.addEventListener('click', function (e) { e.preventDefault(); startPayment('weekly'); });
    payMonthly.addEventListener('click', function (e) { e.preventDefault(); startPayment('monthly'); });
    payQuarterly.addEventListener('click', function (e) { e.preventDefault(); startPayment('quarterly'); });

    // Track sticky CTA usage
    if (ctaCall) ctaCall.addEventListener('click', () => safeGtag('tdv_cta_call', { location: 'sticky' }));
    if (ctaText) ctaText.addEventListener('click', () => safeGtag('tdv_cta_text', { location: 'sticky' }));
    if (ctaSignup) ctaSignup.addEventListener('click', () => safeGtag('tdv_cta_signup', { location: 'sticky' }));

    // If they already reserved in this browser, jump them to Step 2 automatically
    try {
        if (localStorage.getItem("tdv_reserved") === "1") {
            setStep(2);
        }
    } catch (e) {}
})();
</script>
</body>
</html>